# NGRAMBOT

**NGRAMBOT** — это универсальный Telegram-бот, легко расширяемый с помощью плагинов.  
Бот написан на [aiogram 3](https://github.com/aiogram/aiogram) и позволяет добавлять новые функции (поиск, управление задачами, покупка билетов и многое другое) путём создания модулей-плагинов в папке `plugins`.

---

## Возможности

- **Подключение новых функций** без изменения ядра бота.
- **Динамическая загрузка плагинов** из папки `plugins`.
- **Асинхронная обработка** сообщений на базе `aiogram3`.
- **Лёгкая интеграция AI** (например, ChatGPT) для обработки естественного языка.

---

## Установка

1. **Клонируйте репозиторий**:
   ```
   bash
   git clone https://github.com/username/ngrambot.git
   cd ngrambot
   ```

2. **Установите зависимости**:
    ```
    pip install -r requirements.txt
    ```

3. **Создайте и заполните переменные окружения (опционально)**:
В зависимости от ваших нужд, вы можете использовать файл .env или прямо в коде указать:
    ```
    TELEGRAM_BOT_TOKEN="1234567:EXAMPLE_TOKEN_ABCDEFG"
    OPENAI_API_KEY="ВАШ_OPENAI_КЛЮЧ" (если планируете использовать AI).
    ```

## Запуск
Для запуска бота (Python 3.9+):
```python main.py```

После этого бот начнёт опрашивать Telegram в режиме long polling.
Убедитесь, что вы вставили ваш реальный токен Telegram-бота в код (или передали его через переменную окружения).

## Структура проекта
```
ngrambot/
├── main.py                # Точка входа: запуск бота
├── plugins/               # Папка с плагинами
│   ├── __init__.py
│   ├── base_plugin.py     # Базовый класс плагина
│   ├── search_plugin.py   # Пример плагина "поиск"
│   ├── tasks_plugin.py    # Пример плагина "список задач"
│   └── my_new_plugin.py   # Другие плагины, которые вы добавите
├── requirements.txt       # Зависимости проекта
└── README.md              # Описание (вы читаете этот файл)
```

- main.py — содержит основную логику бота: инициализирует PluginManager, загружает плагины из папки plugins, создаёт хендлеры команд/сообщений и запускает бота.
- plugins/ — папка, где лежат все плагины. Каждый плагин — отдельный .py файл с классом, унаследованным от BasePlugin.
- plugins/base_plugin.py — базовый класс, определяющий интерфейс плагина (методы get_commands() и handle_command()).
- plugins/search_plugin.py — пример плагина, который обрабатывает команду /search.
- plugins/tasks_plugin.py — пример плагина, который обрабатывает команды /taskadd и /tasklist для работы со списком задач.

## Как добавить новый плагин

1. Создайте в папке plugins новый файл, например my_new_plugin.py.

2. Подключите базовый класс:
```
from .base_plugin import BasePlugin
from aiogram.types import Message
```

3. Создайте класс, унаследованный от BasePlugin, и переопределите требуемые методы:

```
class MyNewPlugin(BasePlugin):
    def get_commands(self) -> list[str]:
        return ["hello"]

    async def handle_command(self, command: str, args: str, message: Message) -> str | None:
        if command == "hello":
            return "Привет от нового плагина!"
        return None
```

4. После этого бот при запуске автоматически найдёт ваш плагин и зарегистрирует его команды.

## Использование
- Взаимодействие с ботом:
В Telegram найдите вашего бота (по ссылке t.me/<bot_username> или @<bot_username>) и отправьте команду /start.
Попробуйте команды, перечисленные в установленных плагинах (/search, /taskadd, /tasklist и др.).

- Добавление AI:
Если вы хотите, чтобы бот отвечал на вопросы при помощи ChatGPT или любой другой модели, подключите AI-API в методе обработки простых сообщений (text_handler) внутри main.py.

## Лицензия
Проект распространяется под MIT License.

## Контакты
Если у вас есть вопросы или предложения, создайте issue или отправьте Pull Request.
Буду рад вашим идеям и новым плагинам!